var Brickrouge={};
!function(a){var g=0;a.uidOf=function(b){return b.uniqueNumber||(b.uniqueNumber=++g)};a.camelCase=function(b){return String(b).replace(/-\D/g,function(b){return b.charAt(1).toUpperCase()})};a.clone=function(b){var e=a.Widget.BUILT_ATTRIBUTE;b=b.cloneNode(!0);b.removeAttribute(e);Array.prototype.forEach.call(b.querySelectorAll("["+e+"]"),function(b){b.removeAttribute(e)});return b};a.Dataset={from:function(b){var e={};b=b.attributes;for(var d=0,f=b.length,c;d<f;d++)c=b[d],c.name.match(/^data-/)&&(e[a.camelCase(c.name.substring(5))]=
c.value);return e}}}(Brickrouge);
!function(a){function g(){}g.prototype={getObservers:function(b){var a;"$brickrouge:observers"in this||(this["$brickrouge:observers"]=[]);a=this["$brickrouge:observers"];if(!b)return a;b in a||(a[b]=[]);return a[b]},observe:function(b,a){var d=this.getObservers(b);if(-1!==d.indexOf(a))throw Error("Observer already attached for type `"+b+"`");d.push(a)},unobserve:function(a){var e=this.getObservers(null),d,f,c;for(d in Object.keys(e))f=e[d],c=f.indexOf(a),-1!==c&&f.splice(c,1)},notify:function(a,e){var d=
this.getObservers(a),f,c;if(d.length)for(f=0,c=d.length;f<c;f++)try{d[f].apply(null,e)}catch(g){console.error(g)}}};a.Subject=g;a.observe=g.prototype.observe;a.unobserve=g.prototype.unobserve;a.notify=g.prototype.notify;a.getObservers=g.prototype.getObservers}(Brickrouge);
!function(a){function g(a){if(!(a in n))throw Error("There is no widget factory for type `"+a+"`");return n[a]}function b(a){return"object"==typeof a&&"getAttribute"in a&&!!a.getAttribute("brickrouge-is")}function e(b){return a.uidOf(b)in l}function d(a){a.setAttribute("brickrouge-invalid-is",a.getAttribute("brickrouge-is"));a.removeAttribute("brickrouge-is")}function f(b){var f=a.uidOf(b);if(f in l)return l[f];var c=b.getAttribute("brickrouge-is"),e=null;if(!c)throw d(b),Error("The `brickrouge-is` attribute is not defined or empty.");
try{var k=g(c),h;h=b.hasAttribute("brickrouge-options")?JSON.parse(b.getAttribute("brickrouge-options")):a.Dataset.from(b);e=k(b,h)}catch(p){console.error(p)}if(!e)throw d(b),Error("The widget factory `"+c+"` failed to build the widget.");b.setAttribute("brickrouge-built","");try{a.notify("widget",[e])}catch(p){console.error(p)}return l[f]=e}function c(c){var d,g=0,q,k=[];c=c||document.body;if(-1===m.indexOf(c)){m.push(c);if(b(c)&&!e(c))try{k.push(f(c))}catch(h){console.error(h)}d=c.querySelectorAll("[brickrouge-is]:not([brickrouge-built])");
for(q=d.length;g<q;g++)try{k.push(f(d[g]))}catch(h){console.error(h)}m.splice(m.indexOf(c),1);a.notify("update",[c,d,k])}}function t(){function a(b){(new b(function(a){var b=[];a.forEach(function(a){Array.prototype.forEach.call(a.addedNodes,function(a){a instanceof Element&&-1===b.indexOf(a)&&b.push(a)})});b.length&&b.forEach(c)})).observe(document.body,{childList:!0,subtree:!0})}function b(){var a=document.body.innerHTML;setInterval(function(){a!=document.body.innerHTML&&(a=document.body.innerHTML,
c(document.body))},1E3)}var d=MutationObserver||WebkitMutationObserver;d?a(d):b()}function r(a,b){n[a]=b}var n=[],l=[],m=[];a.isWidget=b;a.isBuilt=e;a.register=r;a.registered=g;a.from=f;a.run=function(){t();c(document.body);a.notify("running")};a.Widget={IS_ATTRIBUTE:"brickrouge-is",BUILT_ATTRIBUTE:"brickrouge-built",OPTIONS_ATTRIBUTE:"brickrouge-options",SELECTOR:"[brickrouge-is]",from:f,register:r,registered:g}}(Brickrouge);

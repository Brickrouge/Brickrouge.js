{"version":3,"file":"brickrouge.umd.js","sources":["../node_modules/olvlvl-subject/src/Subject.js","../src/Dataset.js","../src/utils.js","../src/clone.js","../src/stub.js","../src/events.js","../src/widget.js","../src/Brickrouge.js"],"sourcesContent":["const OBSERVERS_PROPERTY = Symbol(\"Subject observers\")\nconst NAME_PROPERTY = Symbol(\"Subject event name\")\n\n/**\n * Asserts that an event name is valid.\n *\n * @param name\n *\n * @throws Error if `name` is not a string.\n */\nfunction assertNameIsValid(name)\n{\n\tif ('symbol' !== typeof name)\n\t{\n\t\tthrow new Error(\"Event name is not a symbol\")\n\t}\n}\n\n/**\n * Retrieve event name from an event constructor.\n *\n * @param {function} constructor\n *\n * @returns {string}\n *\n * @throws Error if `constructor` is not an event constructor.\n */\nfunction retrieveNameFromConstructor(constructor)\n{\n\tif ('function' !== typeof constructor  || !(NAME_PROPERTY in constructor))\n\t{\n\t\tthrow new Error(`Expecting an event instance, got: ${constructor}`)\n\t}\n\n\tconst name = constructor[NAME_PROPERTY]\n\n\tassertNameIsValid(name)\n\n\treturn name\n}\n\n/**\n * Retrieve event name from ab event instance.\n *\n * @param {object} event\n *\n * @returns {string}\n *\n * @throws Error if `event` is not an event instance.\n */\nfunction retrieveNameFromInstance(event)\n{\n\tif ('object' !== typeof event || !(NAME_PROPERTY in event.__proto__.constructor))\n\t{\n\t\tthrow new Error(\"Expected an Event instance\")\n\t}\n\n\tconst name = event.__proto__.constructor[NAME_PROPERTY]\n\n\tassertNameIsValid(name)\n\n\treturn name\n}\n\n/**\n * Return the observers array.\n *\n * @protected\n *\n * @param {Subject} subject\n * @param {string|null} name Event name, or `null` to get all observers.\n *\n * @return {Array}\n */\nfunction getObservers(subject, name) {\n\n\tif (!(OBSERVERS_PROPERTY in subject))\n\t{\n\t\tsubject[OBSERVERS_PROPERTY] = []\n\t}\n\n\tconst observers = subject[OBSERVERS_PROPERTY]\n\n\tif (!name)\n\t{\n\t\treturn observers\n\t}\n\n\tif (!(name in observers))\n\t{\n\t\tobservers[name] = []\n\t}\n\n\treturn observers[name]\n}\n\nexport default class\n{\n\t/**\n\t * Creates an event constructor given a name and a constructor.\n\t *\n\t * @param {function} constructor\n\t *\n\t * @returns {function}\n\t */\n\tstatic createEvent(constructor)\n\t{\n\t\tconstructor[NAME_PROPERTY] = Symbol(\"Event symbol\")\n\n\t\treturn constructor\n\t}\n\n\t/**\n\t * Attach an observer.\n\t *\n\t * @param {function} constructor Event constructor.\n\t * @param {function} callback\n\t *\n\t * @return {Subject}\n\t */\n\tobserve(constructor, callback)\n\t{\n\t\tconst symbol = retrieveNameFromConstructor(constructor)\n\t\tconst observers = getObservers(this, symbol)\n\n\t\tif (observers.indexOf(callback) !== -1)\n\t\t{\n\t\t\tthrow new Error(\"Observer already attached\", constructor)\n\t\t}\n\n\t\tobservers.push(callback)\n\n\t\treturn this\n\t}\n\n\t/**\n\t * Detach an observer.\n\t *\n\t * @param {function} callback\n\t *\n\t * @return {Subject}\n\t */\n\tunobserve(callback)\n\t{\n\t\tconst observers = getObservers(this, null)\n\n\t\tfor (let type of Object.getOwnPropertySymbols(observers))\n\t\t{\n\t\t\tlet typeObservers = observers[type]\n\t\t\tlet k = typeObservers.indexOf(callback)\n\n\t\t\tif (k === -1)\n\t\t\t{\n\t\t\t\tcontinue\n\t\t\t}\n\n\t\t\ttypeObservers.splice(k, 1)\n\t\t}\n\n\t\treturn this\n\t}\n\n\t/**\n\t * Notify observers of a change.\n\t *\n\t * @param {object} event\n\t *\n\t * @return {Subject}\n\t */\n\tnotify(event)\n\t{\n\t\tconst name = retrieveNameFromInstance(event)\n\t\tconst observers = getObservers(this, name)\n\n\t\tfor (let observer of observers)\n\t\t{\n\t\t\ttry\n\t\t\t{\n\t\t\t\tobserver.call(null, event)\n\t\t\t}\n\t\t\tcatch (e)\n\t\t\t{\n\t\t\t\tconsole.error(e)\n\t\t\t}\n\t\t}\n\n\t\treturn this\n\t}\n}\n","/**\n * Camel case dashed-name.\n *\n * @param {string} string\n *\n * @return {string}\n */\nfunction camelCase(string) {\n\n\treturn String(string).replace(/-\\D/g, match => {\n\n\t\treturn match.charAt(1).toUpperCase()\n\n\t})\n\n}\n\n/**\n * Return the dataset values.\n *\n * @param {Element} element\n *\n * @return {Object}\n */\nfunction from(element) {\n\n\tconst dataset = {}\n\tconst attributes = element.attributes\n\n\tfor (let attr of attributes)\n\t{\n\t\tif (!attr.name.match(/^data-/)) continue\n\n\t\tdataset[camelCase(attr.name.substring(5))] = attr.value\n\t}\n\n\treturn dataset\n\n}\n\nexport default {\n\n\tfrom: from\n\n}\n","const UNIQUE_NUMBER_PROPERTY = 'uniqueNumber'\n\nlet uniqueNumberIndex = 0\n\n/**\n * Return the unique identifier a node.\n *\n * @param {Node} node\n *\n * @return {number}\n */\nexport function uidOf(node) {\n\n\treturn node[UNIQUE_NUMBER_PROPERTY] || (node[UNIQUE_NUMBER_PROPERTY] = ++uniqueNumberIndex)\n\n}\n\n/**\n * Efficiently empty an element.\n *\n * @param {Element} element\n */\nexport function empty(element) {\n\n\twhile (element.firstChild)\n\t{\n\t\telement.removeChild(element.firstChild)\n\t}\n\n}\n\n/**\n * @param {Function} Base The parent class to extend.\n * @param ...mixins The classes to mix in.\n *\n * @returns {{}}\n */\nexport function mixin(Base /*, ...mixins*/)\n{\n\tconst properties = {}\n\tconst mixins = Array.prototype.slice.call(arguments, 1) // until nodejs gets rest parameters\n\n\tfor (let mixin of mixins) {\n\t\tlet prototype = mixin.prototype\n\t\tfor (let property of Object.getOwnPropertyNames(prototype)) {\n\t\t\tproperties[property] = { value: prototype[property] }\n\t\t}\n\t}\n\n\tdelete properties.constructor\n\n\tconst mixed = class extends Base {}\n\n\tObject.defineProperties(mixed.prototype, properties)\n\n\treturn mixed\n}\n","import { BUILT_ATTRIBUTE } from './widget'\n\n/**\n * Clone a custom element, taking care of removing sensitive attributes.\n *\n * @param {Element} element\n *\n * @returns {Element}\n */\nexport function clone(element) {\n\n\tconst clone = element.cloneNode(true)\n\n\tclone.removeAttribute(BUILT_ATTRIBUTE)\n\tArray.prototype.forEach.call(clone.querySelectorAll('[' + BUILT_ATTRIBUTE + ']'), element => {\n\n\t\telement.removeAttribute(BUILT_ATTRIBUTE)\n\n\t})\n\n\treturn clone\n}\n","import Subject from './Subject'\nimport Dataset from './Dataset'\nimport { uidOf, empty, mixin } from './utils'\nimport { clone } from './clone'\n\nexport default Object.defineProperties({}, {\n\n\tDataset:           { value: Dataset },\n\tSubject:           { value: Subject },\n\n\tuidOf:             { value: uidOf },\n\tempty:             { value: empty },\n\tmixin:             { value: mixin },\n\tclone:             { value: clone },\n\n\tnotify:            { value: Subject.prototype.notify },\n\tobserve:           { value: Subject.prototype.observe },\n\tunobserve:         { value: Subject.prototype.unobserve }\n\n})\n","import Subject from './Subject'\n\nconst createEvent = Subject.createEvent\n\n/**\n * @event Brickrouge#running\n * @type {Function}\n */\nexport const RunningEvent = createEvent(function () {\n\n})\n\n/**\n * @param {object} widget\n *\n * @event Brickrouge#widget\n * @type {Function}\n * @property {object} widget - The widget that was built.\n */\nexport const WidgetEvent = createEvent(function (widget) {\n\n\tthis.widget = widget\n\n})\n\n/**\n * @param {Element} fragment\n * @param {Array<Element>} elements\n * @param {Array<object>} widgets\n *\n * @event Brickrouge#update\n * @type {Function}\n * @property {Element} fragment - The fragment that triggered the update.\n * @property {Array<Element>} elements - The new widget elements.\n * @property {Array<object>} widgets - The widgets that were built.\n */\nexport const UpdateEvent = createEvent(function (fragment, elements, widgets) {\n\n\tthis.fragment = fragment\n\tthis.elements = elements\n\tthis.widgets = widgets\n\n})\n","import Brickrouge from './stub'\nimport Dataset from './Dataset'\nimport { WidgetEvent, UpdateEvent } from './events'\nimport { uidOf } from './utils'\n\nexport const IS_ATTRIBUTE = 'brickrouge-is'\nexport const BUILT_ATTRIBUTE = 'brickrouge-built'\nexport const OPTIONS_ATTRIBUTE = 'brickrouge-options'\nexport const WIDGET_SELECTOR = '[' + IS_ATTRIBUTE + ']'\nconst INVALID_IS_ATTRIBUTE = 'brickrouge-invalid-is'\nconst WIDGET_NOT_BUILT_SELECTOR = '[' + IS_ATTRIBUTE + ']:not([' + BUILT_ATTRIBUTE + '])'\n\nconst factories = []\nconst widgets = []\nconst parsed = []\n\n/**\n * Return the factory of a widget type.\n *\n * @param {string} type Widget type.\n *\n * @return {function} Widget factory.\n *\n * @throws Error in attempt to use a type for which no factory is defined.\n */\nexport function factory(type)\n{\n\tif (!(type in factories))\n\t{\n\t\tthrow new Error(`There is no widget factory for type \"${type}\"`)\n\t}\n\n\treturn factories[type]\n}\n\n/**\n * Whether a node is a widget.\n *\n * @param {Element} node\n *\n * @returns {boolean} `true` if the node has the {@link IS_ATTRIBUTE} attribute, `false` otherwise.\n */\nexport function isWidget(node)\n{\n\treturn typeof node === 'object' && 'getAttribute' in node && !!node.getAttribute(IS_ATTRIBUTE)\n}\n\n/**\n * Whether a widget is built for the element.\n *\n * @param {Element} element\n *\n * @returns {boolean}\n */\nexport function isBuilt(element)\n{\n\tconst uniqueNumber = uidOf(element)\n\n\treturn uniqueNumber in widgets\n}\n\n/**\n * Invalidates a custom element.\n *\n * @param {Element} element\n */\nfunction invalidate(element)\n{\n\telement.setAttribute(INVALID_IS_ATTRIBUTE, element.getAttribute(IS_ATTRIBUTE))\n\n\telement.removeAttribute(IS_ATTRIBUTE)\n}\n\n/**\n * Resolve the options for the widget.\n *\n * @param {Element} element The element used to create the widget\n *\n * @return {Object}\n */\nfunction resolveOptions(element)\n{\n\tif (element.hasAttribute(OPTIONS_ATTRIBUTE))\n\t{\n\t\treturn JSON.parse(element.getAttribute(OPTIONS_ATTRIBUTE))\n\t}\n\n\treturn Dataset.from(element)\n}\n\n/**\n * Build the widget associated with an element.\n *\n * The `brickrouge.widget` event is fired on the `window` object when a widget is constructed.\n * The event is fired with the widget and its element as arguments. If an error occurs while\n * the event is processed it is caught and logged to the console as an error.\n *\n * @param {Element} element An element\n *\n * @return {Object}\n *\n * @throw Error in attempt to build a widget from an element without {@link IS_ATTRIBUTE}, or\n * when the factory fails to build the widget.\n *\n * @fires Brickrouge#widget\n */\nfunction build(element)\n{\n\tconst type = element.getAttribute(IS_ATTRIBUTE)\n\tlet widget = null\n\n\tif (!type)\n\t{\n\t\tinvalidate(element)\n\n\t\tthrow new Error(`The \"${IS_ATTRIBUTE}\" attribute is not defined or empty.`)\n\t}\n\n\ttry\n\t{\n\t\twidget = factory(type)(element, resolveOptions(element))\n\t}\n\tcatch (e)\n\t{\n\t\tconsole.error(e)\n\t}\n\n\tif (!widget)\n\t{\n\t\tinvalidate(element)\n\n\t\tthrow new Error(`The widget factory \"${type}\" failed to build the widget.`)\n\t}\n\n\telement.setAttribute(BUILT_ATTRIBUTE, \"\")\n\n\ttry\n\t{\n\t\tBrickrouge.notify(new WidgetEvent(widget))\n\t}\n\tcatch (e)\n\t{\n\t\tconsole.error(e)\n\t}\n\n\treturn widget\n}\n\n/**\n * Return the widget associated with an element.\n *\n * @param {Element} element\n *\n * @return {Object}\n */\nexport function createOrReuse(element)\n{\n\tconst uniqueNumber = uidOf(element)\n\n\tif (uniqueNumber in widgets)\n\t{\n\t\treturn widgets[uniqueNumber]\n\t}\n\n\treturn widgets[uniqueNumber] = build(element)\n}\n\n/**\n * Parse a DOM fragment for widgets to build.\n *\n * @param {Element} fragment\n *\n * @fires Brickrouge#update\n */\nfunction parse(fragment)\n{\n\tconst widgets = []\n\n\tfragment = fragment || document.body\n\n\tif (parsed.indexOf(fragment) !== -1) {\n\t\treturn\n\t}\n\n\tparsed.push(fragment)\n\n\tif (isWidget(fragment) && !isBuilt(fragment))\n\t{\n\t\ttry\n\t\t{\n\t\t\twidgets.push(createOrReuse(fragment))\n\t\t}\n\t\tcatch (e)\n\t\t{\n\t\t\tconsole.error(e)\n\t\t}\n\t}\n\n\tlet elements = fragment.querySelectorAll(WIDGET_NOT_BUILT_SELECTOR)\n\n\tfor (let element of elements)\n\t{\n\t\ttry\n\t\t{\n\t\t\twidgets.push(createOrReuse(element))\n\t\t}\n\t\tcatch (e)\n\t\t{\n\t\t\tconsole.error(e)\n\t\t}\n\t}\n\n\tparsed.splice(parsed.indexOf(fragment), 1)\n\n\tBrickrouge.notify(new UpdateEvent(fragment, elements, widgets))\n}\n\n/**\n * Monitor DOM mutations to build new widgets.\n */\nfunction monitor()\n{\n\tconst observer = MutationObserver || WebkitMutationObserver\n\n\tfunction monitorByObserver(observer)\n\t{\n\t\tnew observer(mutations => {\n\n\t\t\tconst elements = []\n\n\t\t\tmutations.forEach(mutation => {\n\n\t\t\t\tArray.prototype.forEach.call(mutation.addedNodes, node => {\n\n\t\t\t\t\tif (!(node instanceof Element) || elements.indexOf(node) !== -1)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn\n\t\t\t\t\t}\n\n\t\t\t\t\telements.push(node)\n\n\t\t\t\t})\n\n\t\t\t})\n\n\t\t\tif (!elements.length) return\n\n\t\t\telements.forEach(parse)\n\n\t\t}).observe(document.body, { childList: true, subtree: true })\n\t}\n\n\tfunction monitorByPolling()\n\t{\n\t\tlet previousState = document.body.innerHTML\n\n\t\tsetInterval(() => {\n\n\t\t\tif (previousState === document.body.innerHTML) {\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tpreviousState = document.body.innerHTML\n\n\t\t\tparse(document.body)\n\n\t\t}, 1000)\n\t}\n\n\tobserver ? monitorByObserver(observer) : monitorByPolling()\n}\n\n/**\n * Registers a widget factory.\n *\n * @param {string} type Widget type.\n * @param {function} factory Factory callback.\n */\nexport function register(type, factory)\n{\n\tfactories[type] = factory\n}\n\n/**\n * Launch the widget monitor and create initial widgets.\n */\nexport function run()\n{\n\tmonitor()\n\tparse(document.body)\n}\n\nexport default {\n\n\tIS_ATTRIBUTE: IS_ATTRIBUTE,\n\tBUILT_ATTRIBUTE: BUILT_ATTRIBUTE,\n\tOPTIONS_ATTRIBUTE: OPTIONS_ATTRIBUTE,\n\tSELECTOR: WIDGET_SELECTOR,\n\n}\n","import {\n\trun as widgetRun,\n\tisWidget,\n\tisBuilt,\n\tregister,\n\tfactory,\n\tcreateOrReuse\n} from './widget'\n\nimport { UpdateEvent, RunningEvent, WidgetEvent } from './events'\nimport Brickrouge from './stub'\n\n/**\n * @fires Brickrouge#running\n */\nfunction run()\n{\n\twidgetRun()\n\tBrickrouge.notify(new RunningEvent)\n}\n\nexport default Object.defineProperties(Brickrouge, {\n\n\tisWidget:   { value: isWidget },\n\tisBuilt:    { value: isBuilt },\n\tregister:   { value: register },\n\tregistered: { value: factory },\n\tfrom:       { value: createOrReuse },\n\trun:        { value: run },\n\n\tobserveUpdate: { value: function (callback) {\n\n\t\tthis.observe(UpdateEvent, callback)\n\n\t}},\n\n\tobserveRunning: { value: function (callback) {\n\n\t\tthis.observe(RunningEvent, callback)\n\n\t}},\n\n\tobserveWidget: { value: function (callback) {\n\n\t\tthis.observe(WidgetEvent, callback)\n\n\t}}\n\n})\n"],"names":["Brickrouge","run","widgetRun"],"mappings":"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"}
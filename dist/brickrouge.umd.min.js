!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.Brickrouge=e()}(this,function(){"use strict";function t(t){return t[w]||(t[w]=++A)}function e(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function n(t){const e={},n=Array.prototype.slice.call(arguments,1);for(let t of n){let n=t.prototype;for(let t of Object.getOwnPropertyNames(n))e[t]={value:n[t]}}delete e.constructor;const r=class extends t{};return Object.defineProperties(r.prototype,e),r}function r(t){return String(t).replace(/-\D/g,t=>t.charAt(1).toUpperCase())}function o(t){const e={},n=t.attributes;for(let t of n)t.name.match(/^data-/)&&(e[r(t.name.substring(5))]=t.value);return e}function i(t){if("symbol"!=typeof t)throw new Error("Event name is not a symbol")}function u(t){if("function"!=typeof t||!(S in t))throw new Error(`Expecting an event instance, got: ${t}`);const e=t[S];return i(e),e}function c(t){if("object"!=typeof t||!(S in t.__proto__.constructor))throw new Error("Expected an Event instance");const e=t.__proto__.constructor[S];return i(e),e}function s(t,e){O in t||(t[O]=[]);const n=t[O];return e?(e in n||(n[e]=[]),n[e]):n}function f(t){if(!(t in P))throw new Error(`There is no widget factory for type "${t}"`);return P[t]}function a(t){return"object"==typeof t&&"getAttribute"in t&&!!t.getAttribute(I)}function l(e){return t(e)in C}function d(t){t.setAttribute(k,t.getAttribute(I)),t.removeAttribute(I)}function v(t){return t.hasAttribute(W)?JSON.parse(t.getAttribute(W)):T.from(t)}function b(t){const e=t.getAttribute(I);let n=null;if(!e)throw d(t),new Error(`The "${I}" attribute is not defined or empty.`);try{n=f(e)(t,v(t))}catch(t){console.error(t)}if(!n)throw d(t),new Error(`The widget factory "${e}" failed to build the widget.`);t.setAttribute(R,"");try{x.notify(new U(n))}catch(t){console.error(t)}return n}function p(e){const n=t(e);return n in C?C[n]:C[n]=b(e)}function y(t){const e=[];if(t=t||document.body,-1===M.indexOf(t)){if(M.push(t),a(t)&&!l(t))try{e.push(p(t))}catch(t){console.error(t)}let n=t.querySelectorAll(L);for(let t of n)try{e.push(p(t))}catch(t){console.error(t)}M.splice(M.indexOf(t),1),x.notify(new j(t,n,e))}}function h(){const t=MutationObserver||WebkitMutationObserver;t?function(t){new t(t=>{const e=[];t.forEach(t=>{Array.prototype.forEach.call(t.addedNodes,t=>{if(!(t instanceof Element)||-1!==e.indexOf(t))return;e.push(t)})});if(!e.length)return;e.forEach(y)}).observe(document.body,{childList:!0,subtree:!0})}(t):function(){let t=document.body.innerHTML;setInterval(()=>{if(t===document.body.innerHTML)return;t=document.body.innerHTML;y(document.body)},1e3)}()}function E(t,e){P[t]=e}function m(){h(),y(document.body),x.notify(new N)}function g(t){const e=t.cloneNode(!0);return e.removeAttribute(R),Array.prototype.forEach.call(e.querySelectorAll("["+R+"]"),t=>{t.removeAttribute(R)}),e}const w="uniqueNumber";let A=0;var T={from:o};const O=Symbol("Subject observers"),S=Symbol("Subject event name");var _=class{static createEvent(t){return t[S]=Symbol("Event symbol"),t}observe(t,e){const n=u(t),r=s(this,n);if(-1!==r.indexOf(e))throw new Error("Observer already attached",t);return r.push(e),this}unobserve(t){const e=s(this,null);for(let n of Object.getOwnPropertySymbols(e)){let r=e[n],o=r.indexOf(t);-1!==o&&r.splice(o,1)}return this}notify(t){const e=c(t),n=s(this,e);for(let e of n)try{e.call(null,t)}catch(t){console.error(t)}return this}};const N=_.createEvent(function(){}),U=_.createEvent(function(t){this.widget=t}),j=_.createEvent(function(t,e,n){this.fragment=t,this.elements=e,this.widgets=n});var x={notify:_.prototype.notify,observe:_.prototype.observe,unobserve:_.prototype.unobserve};const I="brickrouge-is",R="brickrouge-built",W="brickrouge-options",B="["+I+"]",k="brickrouge-invalid-is",L="["+I+"]:not(["+R+"])",P=[],C=[],M=[];var D={IS_ATTRIBUTE:I,BUILT_ATTRIBUTE:R,OPTIONS_ATTRIBUTE:W,SELECTOR:B,UpdateEvent:j,RunningEvent:N,WidgetEvent:U,isWidget:a,isBuilt:l,register:E,registered:f,from:p,run:m};return Object.defineProperties(x,{EVENT_UPDATE:{value:D.UpdateEvent},EVENT_RUNNING:{value:D.RunningEvent},EVENT_WIDGET:{value:D.WidgetEvent},uidOf:{value:t},empty:{value:e},clone:{value:g},mixin:{value:n},Dataset:{value:T},Subject:{value:_},isWidget:{value:D.isWidget},isBuilt:{value:D.isBuilt},register:{value:D.register},registered:{value:D.registered},from:{value:D.from},run:{value:D.run},observeUpdate:{value:function(t){this.observe(D.UpdateEvent,t)}},observeRunning:{value:function(t){this.observe(D.RunningEvent,t)}},observeWidget:{value:function(t){this.observe(D.WidgetEvent,t)}}})});
//# sourceMappingURL=https://github.com/Brickrouge/Brickrouge.js/tree/master/dist/brickrouge.umd.min.js.map
